# üîß –£–°–¢–†–ê–ù–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´: –§–û–¢–û –ù–ï –ü–†–ò–•–û–î–Ø–¢

**–î–∞—Ç–∞:** 23 –¥–µ–∫–∞–±—Ä—è 2025, 05:44 UTC

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ñ–æ—Ç–æ –±–æ—Ç—É –≤ Telegram, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Ö –Ω–µ –ø–æ–ª—É—á–∏–ª–æ.

---

## üîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. Backend API –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚ùå

**–°–∏–º–ø—Ç–æ–º—ã:**
- –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –±–æ—Ç—É
- –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π
- –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ñ–æ—Ç–æ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd "D:\fotobox+react\photobooth-magic-main\backend"
set TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
python app.py
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ Flask API: http://localhost:5000
‚úÖ Telegram Bot –∑–∞–ø—É—â–µ–Ω!
```

---

### 2. Telegram –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚ùå

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram
- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç

**–†–µ—à–µ–Ω–∏–µ:**
–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å `app.py`.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
‚úÖ Telegram Bot –∑–∞–ø—É—â–µ–Ω!
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:
```bash
set TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
```

---

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π session_id ‚ùå

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ë–æ—Ç –≥–æ–≤–æ—Ä–∏—Ç "–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
- –§–æ—Ç–æ –Ω–µ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
- QR –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ü–û–°–õ–ï –∑–∞–ø—É—Å–∫–∞ backend
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–ª–æ —Å–µ—Å—Å–∏—é (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ F12)

---

### 4. Username –±–æ—Ç–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚ùå

**–°–∏–º–ø—Ç–æ–º—ã:**
- QR –∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –≤–µ–¥—ë—Ç –Ω–µ –Ω–∞ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**

**–§–∞–π–ª:** `src\store\photoBoothStore.ts` (—Å—Ç—Ä–æ–∫–∞ 59)

–ó–∞–º–µ–Ω–∏—Ç–µ:
```typescript
botUsername: 'your_bot_username', // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
```

–ù–∞:
```typescript
botUsername: 'sony_photobooth_bot', // ‚úÖ –í–∞—à username –ë–ï–ó @
```

---

### 5. Polling –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚ùå

**–°–∏–º–ø—Ç–æ–º—ã:**
- –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –±–æ—Ç—É
- –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–ª—É—á–µ–Ω–∏–µ
- –ù–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã: `GET /api/session/xxx/photos`
- –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç - polling –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –ó–ê–ü–£–°–ö–ê

### –®–∞–≥ 1: Backend + Bot
```bash
cd "D:\fotobox+react\photobooth-magic-main\backend"
set TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
python app.py
```

**–ñ–¥–∏—Ç–µ –≤—ã–≤–æ–¥:**
```
============================================================
üöÄ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ PHOTOBOOTH
============================================================

‚úÖ Flask API: http://localhost:5000
‚úÖ Test endpoint: http://localhost:5000/api/test

ü§ñ –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞...
‚úÖ Telegram Bot –∑–∞–ø—É—â–µ–Ω!
   Bot Token: 123456789:...

============================================================
–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!
============================================================
```

### –®–∞–≥ 2: Frontend
```bash
cd "D:\fotobox+react\photobooth-magic-main"
npm run dev
```

### –®–∞–≥ 3: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
http://localhost:5173
```

### –®–∞–≥ 4: –¢–µ—Å—Ç Upload Flow

1. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:** –ù–∞–∂–º–∏—Ç–µ "–ü–µ—á–∞—Ç—å"
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ Session created: xxx`
3. **–ü–æ—è–≤–∏—Ç—Å—è QR –∫–æ–¥**
4. **–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º**
5. **–í Telegram:** –û—Ç–∫—Ä–æ–µ—Ç—Å—è –±–æ—Ç
6. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É 3 —Ñ–æ—Ç–æ**
7. **–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å:** "‚úÖ –§–æ—Ç–æ 1/3 –∑–∞–≥—Ä—É–∂–µ–Ω–æ!"
8. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:** –§–æ—Ç–æ –ø–æ—è–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 3-6 —Å–µ–∫—É–Ω–¥

---

## üß™ –¢–ï–°–¢ –ß–ï–†–ï–ó CURL (–±–µ–∑ Frontend)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Å—Å–∏—é
curl -X POST http://localhost:5000/api/session/create -H "Content-Type: application/json" -d "{\"type\":\"upload\"}"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ session_id –∏–∑ –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: abc-123-def)

# 2. –í Telegram –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É:
# /start upload_abc-123-def

# 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ 3 —Ñ–æ—Ç–æ –±–æ—Ç—É

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–æ—Ç–æ –ø—Ä–∏—à–ª–∏:
curl http://localhost:5000/api/session/abc-123-def/photos
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ, —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] Backend –∑–∞–ø—É—â–µ–Ω (`python app.py`)
- [ ] –í—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç "‚úÖ Telegram Bot –∑–∞–ø—É—â–µ–Ω!"
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
- [ ] –û—Ç–∫—Ä—ã–ª–∏ http://localhost:5173
- [ ] –ù–∞–∂–∞–ª–∏ "–ü–µ—á–∞—Ç—å" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –≤–∏–¥–Ω–æ: "Session created"
- [ ] QR –∫–æ–¥ –ø–æ—è–≤–∏–ª—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- [ ] Username –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `photoBoothStore.ts`
- [ ] –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ QR —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
- [ ] –ë–æ—Ç –æ—Ç–∫—Ä—ã–ª—Å—è –∏ –ø—Ä–æ—Å–∏—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
- [ ] –û—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ñ–æ—Ç–æ (–ù–ï –∫–∞–∫ —Ñ–∞–π–ª, –∞ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!)

---

## üîç –û–¢–õ–ê–î–ö–ê –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò

### –¢–µ—Ä–º–∏–Ω–∞–ª Backend:
–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤—ã–≤–æ–¥ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ç–æ –±–æ—Ç—É.

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ Photo added to session xxx: 1
‚úÖ Photo added to session xxx: 2
‚úÖ Photo added to session xxx: 3
```

### –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ Network –≤–∫–ª–∞–¥–∫—É.

–ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å:
```
GET /api/session/xxx/photos?type=uploaded
Status: 200
```

–ü–æ—Å–ª–µ 3 —Ñ–æ—Ç–æ –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∞—Å—Å–∏–≤ –∏–∑ 3 —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

---

## üêõ –¢–ò–ü–ò–ß–ù–´–ï –û–®–ò–ë–ö–ò

### –û—à–∏–±–∫–∞ 1: "Session not found"

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è QR

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend
2. –ù–∞–∂–º–∏—Ç–µ "–ü–µ—á–∞—Ç—å" –∑–∞–Ω–æ–≤–æ (—Å–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è)
3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –ù–û–í–´–ô QR –∫–æ–¥

### –û—à–∏–±–∫–∞ 2: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ @BotFather
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –≤—ã–≤–æ–¥–µ –µ—Å—Ç—å "‚úÖ Telegram Bot –∑–∞–ø—É—â–µ–Ω!"

### –û—à–∏–±–∫–∞ 3: –§–æ—Ç–æ –Ω–µ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ñ–æ—Ç–æ –∫–∞–∫ –§–ê–ô–õ –≤–º–µ—Å—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- –í Telegram –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–∫—Ä–µ–ø–∫—É
- –í—ã–±–µ—Ä–∏—Ç–µ "–§–æ—Ç–æ" (–Ω–µ "–§–∞–π–ª"!)
- –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ

---

## üìû –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã** (Ctrl+C)

2. **–û—á–∏—Å—Ç–∏—Ç–µ —Å–µ—Å—Å–∏–∏:**
```bash
curl -X POST http://localhost:5000/api/sessions/cleanup
```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:**
```bash
set TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
python app.py
```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend:**
```bash
npm run dev
```

5. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ**

---

## üí° –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏:

```bash
# Backend —Ä–∞–±–æ—Ç–∞–µ—Ç?
curl http://localhost:5000/api/test

# –ï—Å—Ç—å —Å–µ—Å—Å–∏–∏?
curl http://localhost:5000/api/sessions/list

# Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç?
# –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5173
```

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–µ—Å—å flow –∑–∞–Ω–æ–≤–æ!

---

**–§–∞–π–ª:** D:\fotobox+react\photobooth-magic-main\backend\–ü–†–û–ë–õ–ï–ú–ê_–§–û–¢–û_–ù–ï_–ü–†–ò–•–û–î–Ø–¢.md
